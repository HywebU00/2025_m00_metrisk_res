<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>風險評估及產品危險預防對策系統</title>

    <script src="javascript/common_utils.js"></script>
    <script src="javascript/common_form_utils.js"></script>
    <script src="javascript/formvalidator.js"></script>
    <!-- sweetalert start -->
    <script src="javascript/sweetalert.min.js"></script>
    <link type="text/css" rel="stylesheet" href="styles/sweetalert.css" />
    <script type="text/javascript">
      <!--
      (function () {
        window.alert = function () {
          return swal.apply(this, arguments);
        };
      })(window.alert);
      //-->
    </script>
    <!-- sweetalert end -->

    <script type="text/javascript" src="javascript/jquery/jquery-3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascript/jquery/jquery-migrate-3.0.1/jquery-migrate-3.0.1.min.js"></script>
    <link href="styles/jquery/jquery-ui-1.12.1.min.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="javascript/jquery/jquery-ui-1.12.1/jquery-ui.min.js"></script>

    <script type="text/javascript" src="javascript/jquery/jquery.cookie.js?1=1"></script>

    <script type="text/javascript" src="javascript/jquery/jquery.blockUI.js"></script>

    <!-- jquery file upload -->
    <link href="styles/jquery/upload/jquery.fileupload.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="javascript/jquery/upload/jquery.iframe-transport.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-file-upload/10.2.0/js/jquery.fileupload.js"></script>

    <!-- datepicker zh-TW -->
    <script src="javascript/jquery/jquery.ui.datepicker-zh-TW.js"></script>

    <script src="javascript/jquery/jquery.maskedinput.js"></script>

    <!-- multi calendar select -->
    <script src="javascript/jquery/jquery-ui.multidatespicker.js"></script>

    <script src="javascript/jquery/jquery.popupWindow.js"></script>

    <!-- datetimepicker -->
    <script src="javascript/jquery/jquery-ui-timepicker-addon.js"></script>
    <link rel="Stylesheet" type="text/css" href="styles/jquery/jquery-ui-timepicker-addon.css" />

    <!-- smooth div scroll -->
    <link rel="Stylesheet" type="text/css" href="styles/jquery/smoothDivScroll/smoothDivScroll.css" />
    <script src="javascript/jquery/smoothDivScroll/jquery.mousewheel.min.js"></script>
    <script src="javascript/jquery/smoothDivScroll/jquery.kinetic.min.js"></script>
    <script src="javascript/jquery/smoothDivScroll/jquery.smoothdivscroll-1.3-min.js"></script>

    <!-- jquery plugin select2 -->
    <script src="javascript/jquery/select2/select2.min.js"></script>
    <link rel="Stylesheet" type="text/css" href="styles/jquery/select2/select2.min.css" />

    <script>
      //example $("#element").exists();
      $.fn.exists = function () {
        return this.length !== 0;
      };

      //fix ajax always happen jqXHR.status === 0
      $(document).ajaxError(function (e, jqxhr, settings, exception) {
        if (jqxhr.readyState == 0 || jqxhr.status == 0) {
          alert('ajaxError(){ jqxhr.readyState == 0 || jqxhr.status == 0 }');
          return; // Skip this error
        }
      });
    </script>

    <link href="web/css/layout.css" rel="stylesheet" />
    <link href="web/assets/fontello/css/fontello.css" rel="stylesheet" />
    <link href="styles/custom.css" rel="stylesheet" />

    <script src="javascript/common_datepicker.js"></script>
    <script src="javascript/jquery.twzipcode.min.js"></script>
  </head>
  <body>
    <!-- 直接跳主內容區 -->
    <a class="goCenter" href="#aC" tabindex="1">按Enter到主內容區</a>
    <div class="wrap mp">
      <script language="JavaScript">
        var timeOut = 900; //15分鐘
        $(function () {
          if (true) showTimeOut();
        });

        function showTimeOut() {
          timeOut -= 1;

          if (timeOut == 0) {
            if (confirm('您已閒置未使用系統達15分鐘，系統已強制登出，請重新登入。')) {
              doLogout();
            } else {
              doLogout();
            }
          } else {
            var m = Math.floor((timeOut % 3600) / 60);
            var s = Math.floor(timeOut % 60);
            if (m < 10) {
              m = '0' + m;
            }
            if (s < 10) {
              s = '0' + s;
            }

            document.getElementById('numberSec').innerHTML = '距離登出還有' + m + ':' + s;

            //每秒執行一次,showTimeOut()
            setTimeout(showTimeOut, 1000);
          }
        }

        function doLogout() {
          formLogout.submit();
        }
      </script>

      <header>
        <a class="accessKey" href="#aU" id="aU" accesskey="U" title="上方功能區塊" tabindex="2">:::</a>
        <h1><a href="/RES/home.action" class="logo1">風險評估及產品危險預防對策系統</a></h1>

        <div class="user">
          <span id="numberSec" style="color: blue">距離登出還有14:45</span>

          <a href="javascript:void(0);" onclick="doLogout();"> 登出 </a>
        </div>
      </header>

      <form id="formLogout" action="/RES/j_spring_security_logout" method="POST">
        <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
      </form>

      <main class="clear-fix">
        <div class="Left Menu">
          <a class="accessKey" href="#aL" id="aL" accesskey="L" title="左方主選單">:::</a>
          <div class="box btn-box">
            <a href="###" class="btn negative" style="width: 235px; text-align: left" onclick="navigator('home')">風險評估撰寫</a><br />

            <a href="###" class="btn negative" style="width: 235px; text-align: left" onclick="navigator('editCompany')">步驟一：廠商及人員資料</a><br />

            <a href="###" class="btn negative" style="width: 235px; text-align: left" onclick="navigator('editEquipment')">步驟二：機械設備基本資訊</a><br />

            <a href="###" class="btn negative" style="width: 235px; text-align: left" onclick="navigator('editRiskLevelDef')">步驟三：風險等級定義</a><br />

            <a href="###" class="btn negative" style="width: 235px; text-align: left" onclick="navigator('listHazardItem')">步驟四：危害辨識</a><br />

            <a href="###" class="btn negative" style="width: 235px; text-align: left" onclick="navigator('listEvaluation')">步驟五：風險評估</a><br />

            <a href="###" class="btn positive" style="width: 235px; text-align: left" onclick="navigator('listCountermeasure')">步驟六：降低對策</a><br />

            <a href="###" class="btn negative" style="width: 235px; text-align: left" onclick="navigator('downloadRiskEvaluationReport')">風險評估報告下載</a><br />
          </div>

          <form id="home" name="home" action="/RES/home.action" method="POST">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <form id="editCompany" name="editCompany" action="/RES/front/riskEvaluation/editCompany.action" method="POST">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <form id="editEquipment" name="editEquipment" action="/RES/front/riskEvaluation/editEquipment.action" method="POST">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <form id="editRiskLevelDef" name="editRiskLevelDef" action="/RES/front/riskEvaluation/editRiskLevelDef.action" method="POST">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <form id="listHazardItem" name="listHazardItem" action="/RES/front/riskEvaluation/listHazardItem.action" method="POST">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <form id="listEvaluation" name="listEvaluation" action="/RES/front/riskEvaluation/listEvaluation.action" method="POST">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <form id="listCountermeasure" name="listCountermeasure" action="/RES/front/riskEvaluation/listCountermeasure.action" method="POST">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <form id="downloadRiskEvaluationReport" name="downloadRiskEvaluationReport" action="/RES/front/riskEvaluation/downloadRiskEvaluationReport.action" method="POST">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <script>
            $(function () {});

            function navigator(action) {
              if (false && action != 'home') {
                alert('尚未開始進行風險評估!');
                return false;
              } else {
                document.getElementById(action).submit();
              }
            }
          </script>
        </div>
        <div class="Right Content">
          <a class="accessKey" href="#aC" id="aC" accesskey="C" title="主要內容區">:::</a>
          <div aria-label="Breadcrumb" class="breadcrumb">
            <ul>
              <li><a href="#">首頁</a></li>
              <li><a href="#">風險評估撰寫</a></li>
              <li aria-current="page">步驟六：降低對策編修</li>
            </ul>
          </div>
          <form id="saveCountermeasure" name="saveCountermeasure" action="/RES/front/riskEvaluation/saveCountermeasure.action" method="post">
            <div class="box Table">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
              <input type="hidden" name="targetObject.riId" value="2c991630969e4e7d0196a51df34e0009" id="saveCountermeasure_targetObject_riId" />
              <input type="hidden" name="targetObject.defId" value="2c991630969e709c0196a51dc132000b" id="saveCountermeasure_targetObject_defId" />
              <input type="hidden" name="targetObject.hazardId" value="2c991630969e4e7d0196a51df32f0008" id="saveCountermeasure_targetObject_hazardId" />
              <input type="hidden" name="targetObject.riOrigional" value='[{"type":"S","level":"1"},{"type":"F","level":"1"},{"type":"O","level":"1"},{"type":"A","level":"1"}]' id="saveCountermeasure_targetObject_riOrigional" />

              <h2>步驟六：降低對策</h2>

              <table>
                <tbody>
                  <tr>
                    <th scope="row" style="white-space: nowrap">危害源：</th>
                    <td>
                      <label id="saveCountermeasure_targetObject_hazardItem_sourceObj_type">機械危害</label>
                      \
                      <label id="saveCountermeasure_targetObject_hazardItem_sourceObj_origin">無</label>
                    </td>
                    <th scope="row" style="white-space: nowrap">危害狀況：</th>
                    <td>
                      <label id="saveCountermeasure_targetObject_hazardItem_situationObj_stage">搬運輸送</label>
                      \
                      <label id="saveCountermeasure_targetObject_hazardItem_situationObj_task">無</label>
                    </td>
                  </tr>
                  <tr>
                    <th scope="row" style="white-space: nowrap">危害事件：</th>
                    <td>
                      <label id="saveCountermeasure_targetObject_hazardItem_eventObj_reason">可動刀片與工件之間</label>
                      \
                      <label id="saveCountermeasure_targetObject_hazardItem_eventObj_result">無</label>
                    </td>
                    <th scope="row" style="white-space: nowrap">危害區域：</th>
                    <td><label id="saveCountermeasure_targetObject_hazardItem_region"></label></td>
                  </tr>
                  <tr>
                    <th scope="row" style="white-space: nowrap">風險等級：</th>
                    <td colspan="3">
                      <table>
                        <tbody>
                          <tr>
                            <td width="10%" nowrap="">(S)傷害的嚴重性：</td>
                            <td>1</td>
                          </tr>
                          <tr>
                            <td width="10%" nowrap="">(F)暴露的頻率與期間：</td>
                            <td>1</td>
                          </tr>
                          <tr>
                            <td width="10%" nowrap="">(O)危害事件因安全防護失效發生的機率：</td>
                            <td>1</td>
                          </tr>
                          <tr>
                            <td width="10%" nowrap="">(A)避免傷害的可能性：</td>
                            <td>1</td>
                          </tr>
                          <tr>
                            <td width="10%" nowrap="">(RI)風險等級：</td>
                            <td>1 (自動計算產生)</td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </tbody>
              </table>

              <table class="horizontal">
                <th scope="row" ead>
                  <tr>
                    <th scope="row">選取</th>
                    <th scope="row"><div align="left">風險降低對策</div></th>
                  </tr>
                </th>
                <tbody id="tableBody">
                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed3101aec00be" id="checkid1" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid1">本質安全設計</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed310d488009a" checked="true" id="checkid2" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid2">閉合表面之間的間距不超過 6 mm</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed31129dc009b" id="checkid3" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid3">50 % 的彈簧總成失效，制動器仍可運作</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed311be9a009c" id="checkid4" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid4">氣、油壓系統設置過濾器和壓力調節器</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed311fe81009d" id="checkid5" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid5">管接頭應為凸緣式或焊接式</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed317ebb800c1" id="checkid6" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid6">離合器和制動器操作閥應設計成使進氣口和排氣口無法同時關閉</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed31833ed009f" id="checkid7" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid7">離合器和制動器及其控制系統應設計成在氣壓、液壓或電力供應失效時分離離合器並立即施加制動力</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed318840100c2" id="checkid8" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid8">滑塊/撞錘移動寸動步進不得超過 6 mm</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed318c7b100c3" id="checkid9" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid9">設計/提供固定點允許機台連接地面/地基</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed31915d100a0" id="checkid10" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid10">裝設足夠的護欄和腳趾板</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed32242b200c6" id="checkid11" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid11">安全防護</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed32311bb00c7" id="checkid12" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid12">護罩</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed3235ec100c8" id="checkid13" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid13">追加對策</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed3239fb200a8" id="checkid14" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid14">緊急停止裝置</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed323da0c00c9" id="checkid15" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid15">模式選擇開關</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed324371000a9" id="checkid16" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid16">持壓控制裝置</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed324e3fa00ca" id="checkid17" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid17">雙手控制裝置</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed32537e600aa" id="checkid18" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid18">寸動</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed32584fd00cb" id="checkid19" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid19">安全運轉速度</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed32605d500cc" id="checkid20" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid20">機械抑制裝置(例：擋塊)</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed326478200ab" id="checkid21" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid21">腳踏開關</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed326ab6c00cd" id="checkid22" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid22">使用資訊</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed327298500ac" id="checkid23" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid23">警告、標示提醒</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e0970a7017ed3276b1300ce" id="checkid24" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid24">操作手冊說明</label></div>
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <input type="checkbox" name="codeList" value="2c9916307e096e64017ed3279dbb00ad" id="checkid25" />
                    </td>
                    <td>
                      <div align="left"><label for="checkid25">個人保護用具</label></div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <br />

              <div id="btnAddOption">
                <a href="javascript:void(0)"><img src="images/icon_mywork.gif" id="newRowOption" alt="新增" />自訂對策</a>
              </div>
              <br />

              <table>
                <tbody>
                  <tr>
                    <th scope="row" style="white-space: nowrap">風險降低結果：</th>
                    <td colspan="3">
                      <table>
                        <tbody>
                          <tr>
                            <td width="10%" nowrap="">(S)傷害的嚴重性：</td>
                            <td>
                              <input type="radio" name="serverity" id="saveCountermeasure_serverity1" checked="checked" value="1" class="SFOA" /><label for="saveCountermeasure_serverity1" class="SFOA">輕微(S1)</label>

                              可復原的(非永久性的傷害)，或是&lt;=2天不能進行工作。<br /><br />
                              <input type="radio" name="serverity" id="saveCountermeasure_serverity2" value="2" class="SFOA" /><label for="saveCountermeasure_serverity2" class="SFOA">嚴重(S2)</label>

                              不可復原的(死亡、截肢)，或是&gt;2天不能進行工作。
                            </td>
                          </tr>
                          <tr>
                            <td width="10%" nowrap="">(F)暴露的頻率與期間：</td>
                            <td>
                              <input type="radio" name="frequency" id="saveCountermeasure_frequency1" checked="checked" value="1" class="SFOA" /><label for="saveCountermeasure_frequency1" class="SFOA">偶而(F1)</label>

                              偶而或短暫暴露(每一工作週期&lt;=2次；或累計暴露時間&lt;=15分鐘)<br /><br />
                              <input type="radio" name="frequency" id="saveCountermeasure_frequency2" value="2" class="SFOA" /><label for="saveCountermeasure_frequency2" class="SFOA">頻繁(F2)</label>

                              頻繁或長時間暴露(每一工作週期&gt;2次；或累計暴露時間&gt;15分鐘)
                            </td>
                          </tr>
                          <tr>
                            <td width="10%">(O)危害事件因安全防護失效發生的機率：</td>
                            <td>
                              <input type="radio" name="opportunity" id="saveCountermeasure_opportunity1" checked="checked" value="1" class="SFOA" /><label for="saveCountermeasure_opportunity1" class="SFOA">低(O1)</label>

                              不太可能或沒發生過(成熟的技術，已被證實並確認安全的設計)<br /><br />
                              <input type="radio" name="opportunity" id="saveCountermeasure_opportunity2" value="2" class="SFOA" /><label for="saveCountermeasure_opportunity2" class="SFOA">中(O2)</label>

                              偶而發生的(最近兩年內發生過技術故障，由已受良好訓練且在工作站有半年以上工作經驗的勞工所造成)<br /><br />
                              <input type="radio" name="opportunity" id="saveCountermeasure_opportunity3" value="3" class="SFOA" /><label for="saveCountermeasure_opportunity3" class="SFOA">高(O3)</label>

                              定期發生技術故障(每六個月或以下，由未受訓練且在工作站不到半年經驗的勞工所造成)
                            </td>
                          </tr>
                          <tr>
                            <td width="10%" nowrap="">(A)避免傷害的可能性：</td>
                            <td>
                              <input type="radio" name="avoid" id="saveCountermeasure_avoid1" checked="checked" value="1" class="SFOA" /><label for="saveCountermeasure_avoid1" class="SFOA">可能(A1)</label>

                              可能迴避(例如移動零件速度&lt;=250 mm/s且暴露人員熟悉危害狀態，能對其產生反應)<br /><br />
                              <input type="radio" name="avoid" id="saveCountermeasure_avoid2" value="2" class="SFOA" /><label for="saveCountermeasure_avoid2" class="SFOA">不可能(A2)</label>

                              不可能迴避(例如移動零件速度&gt;250 mm/s)
                            </td>
                          </tr>
                          <tr>
                            <td width="10%" nowrap="">(RI)風險等級：</td>
                            <td id="improveResultLabel">1 (自動計算產生)</td>
                            <input type="hidden" name="targetObject.hazardItem.improveResult" value="1" id="improveResult" />
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </tbody>
              </table>
              <br />

              <div align="center">
                <a href="###" class="btn positive" onclick="submit();"> 儲存 </a>
                <a href="###" class="btn negative" onclick="$('#listCountermeasure').submit();">回上頁</a>
              </div>
            </div>
          </form>

          <form id="listCountermeasure" name="listCountermeasure" action="/RES/front/riskEvaluation/listCountermeasure.action" method="post">
            <table class="wwFormTable">
              <input type="hidden" name="_csrf" value="e7395af8-f738-4891-8180-5191eb589bf1" />
            </table>
          </form>

          <script>
            $(function () {
              var countIsInExamItem = 0;

              if ('' == 'Y') {
                var which = '#' + '1';
                var chapter = '';
                var type = '';

                $(which).prop('checked', true);
                updateInfo(which, chapter, type);
                countIsInExamItem++;
              }
            });

            function submit() {
              document.getElementById('saveCountermeasure').submit();
            }

            $('.SFOA').change(function () {
              var riAnalysis = [
                { type: 'S', level: $("input[name='serverity']:checked").val() },
                { type: 'F', level: $("input[name='frequency']:checked").val() },
                { type: 'O', level: $("input[name='opportunity']:checked").val() },
                { type: 'A', level: $("input[name='avoid']:checked").val() },
              ];

              $.ajax({
                type: 'POST',
                url: '/RES/front/riskEvaluation/calculateRI.action',
                data: {
                  riAnalysis: JSON.stringify(riAnalysis),
                },

                success: function (data) {
                  $('#improveResult').val(data);
                  $('#improveResultLabel').html(data + ' (自動計算產生)');
                },
              });
            });

            var newTrCount = 1;

            function reduce() {
              newTrCount--;
            }

            $('body').on('click', '.remove_sub', function () {
              $(this).closest('tr').remove();
            });

            $('#newRowOption').click(function () {
              var detailTr = $('<tr class="newDescription"/>').html(
                '<td><label for="descriptionList"></label></td>' +
                  '<td><div align="left">' +
                  '<input type="text" name="descriptionList" size="30" value="" id="descriptionList" placeholder="自填"/> ' +
                  '<a href="javascript:reduce();" class="remove_sub">' +
                  '<img src="images/icon_delete.gif" alt="刪除" /></a></div></td>'
              );

              $('#tableBody').append(detailTr);
              newTrCount++;
            });
          </script>
        </div>
      </main>

      <footer>
        <p>勞動部職業安全衛生署 版權所有© 2019 All Right Reserved</p>
      </footer>
    </div>
  </body>
</html>
